from flask import Flask, render_template, url_for, request, redirect, json
import util

app = Flask(__name__)

@app.route('/')
@app.route('/tiva/')
def tivaHome():
    allrecipes = util.list_all_names()
    allcats = util.list_categories()
    return render_template('home.html', hpcat=allcats, hprecipes=allrecipes)

@app.route('/tiva/<cat>/', methods=['GET','POST'])
def catRecipes(cat):
    recipes = util.list_cat_recipes(cat)
    return render_template('cat-recipes.html',category=cat,cat_len=len(recipes),cat_recipes=recipes)

# Task 1: Create route for newRecipeItem function here
@app.route('/tiva/<cat>/new/', methods=['GET','POST'])
def newRecipeItem(cat):
    #return "page to create a new menu item. Task 1 complete!"
    if request.method == 'POST':
        return redirect(url_for('viewRecipeItem', cat=cat,recipe_id=10))
    else:
        return render_template('newrecipe-item.html', cat=cat)

# Display the content of the recipe
@app.route('/tiva/<cat>/<int:recipe_id>')
def viewRecipeItem(cat, recipe_id):
    return 'ok. new recipe is created!'

# Task 2: Create route for editRecipeItem function here
@app.route('/tiva/<cat>/<int:recipe_id>/edit/')
def editRecipeItem(cat, recipe_id):
    return "page to edit a menu item. Task 2 complete!"

# Task 3: Create a route for deleteMenuItem function here
@app.route('/tiva/<cat>/<int:recipe_id>/delete/')
def deleteRecipeItem(cat, recipe_id):
    return "page to delete a menu item. Task 3 complete!"


if __name__ == '__main__':
    app.debug = True
    app.run(host='0.0.0.0', port=5000)


